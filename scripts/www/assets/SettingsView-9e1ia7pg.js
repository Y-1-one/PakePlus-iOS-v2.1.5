import{c as w,r as l,f as Ve,g as Qt,h as Qe,i as Ye,a as Yt,j as e,S as Ze,t as i,k as Xe,l as Zt,m as Xt,n as W,B as Wt,e as We,o as qt,q as Kt,u as qe,G as Ke,v as es,Q as ts,R as be,w as ss,x as as,y as rs,z as et,F as ls,D as tt,E as q,H as K,I as E,d as ot,J as P,b as st,K as is,N as at,O as rt,p as ns,L as lt,V as ds,U as os,M as cs,W as xs,X as ms,Y as hs,Z as bs,_ as gs,$ as us}from"./index-BDj9p9M6.js";import{P as fs,a as ps,D as ge,L as js,S as ue,Z as it,b as ws,c as ks,M as vs,C as Ns,d as ys,B as Cs,I as _s,F as Ss}from"./zap-DtEwEg4Z.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],zs=w("command",Is);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Es=w("copy",Ds);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],As=w("database",Ps);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],Rs=w("git-commit-horizontal",Ms);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Ls=w("heart",Us);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],nt=w("key",Os);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fe=w("log-out",Gs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],$s=w("timer",Ts);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]],Bs=w("vibrate",Fs),ee="eurasia_growth_engine_v1_secret_salt",dt="薪火相传，生生不息。愿你带领大家，奔赴更远的星辰大海。",v=({children:A})=>ot.createPortal(A,document.body),Ys=({onThemeToggle:A})=>{var Fe,Be;const[k,pe]=l.useState(Ve()),[s,S]=l.useState(null),[je]=l.useState(Qt()),[M,te]=l.useState(!1),[se,we]=l.useState(""),[ae,ke]=l.useState(""),[ve,Ne]=l.useState(""),[re,ye]=l.useState(""),[Ce,_e]=l.useState(""),[le,Se]=l.useState(""),[R,ie]=l.useState(""),[I,Ie]=l.useState(!0),[ct,xt]=l.useState(Qe()),[m,f]=l.useState(Qe()),[N,U]=l.useState("basic"),[c,n]=l.useState(null),[L,ne]=l.useState(""),[p,O]=l.useState("temp_admin"),[ze,De]=l.useState(""),[G,de]=l.useState(""),[mt,ht]=l.useState(0),[bt,Ee]=l.useState(!1),[T,$]=l.useState(0),[gt,oe]=l.useState(!1),[ce,ut]=l.useState(""),[Hs,Pe]=l.useState(""),[F,B]=l.useState(""),[y,H]=l.useState(!1),[J,xe]=l.useState(""),[ft,V]=l.useState(!1),[C,z]=l.useState("full"),[D,_]=l.useState("upload"),[Js,Ae]=l.useState(""),[me,Me]=l.useState(""),[Re,Ue]=l.useState(""),[x,Q]=l.useState(null),[Y,j]=l.useState(null),[pt,Le]=l.useState(""),he=l.useRef(null);l.useEffect(()=>{Ye(k),A&&A(k.darkMode)},[k]),l.useEffect(()=>{const t=Yt();if(S(t),t){we(t.name),ke(t.departmentId),Ne(t.position),ye(t.avatar),_e(t.birthday||""),Se(t.college||"人文教育学院");let a=t.organization||"西安欧亚学院人文教育学院学生成长促进会";const r=a.startsWith("西安欧亚学院");Ie(r),r&&(a=a.replace("西安欧亚学院",""),t.college&&a.startsWith(t.college)&&(a=a.replace(t.college,""))),ie(a)}},[]);const jt=()=>{pe(t=>({...t,darkMode:!t.darkMode})),i("selection")},wt=t=>{pe(a=>({...a,hapticIntensity:t})),Ye({...k,hapticIntensity:t}),setTimeout(()=>{t>0&&i("medium")},100)},kt=()=>{s!=null&&s.userId&&(navigator.clipboard.writeText(s.userId),i("success"),alert("个人编号已复制"))},vt=async t=>{var r;const a=(r=t.target.files)==null?void 0:r[0];if(a)try{const o=await tt(a,300,.7);ye(o)}catch{alert("图片处理失败")}},Nt=()=>{if(!se||!ae)return;const t=I?`西安欧亚学院${le}${R}`:R,a={...s,name:se,departmentId:ae,position:ve,avatar:re,birthday:Ce,college:le,organization:t,registerDate:(s==null?void 0:s.registerDate)||new Date().toISOString().split("T")[0],identity:(s==null?void 0:s.identity)||"user",userId:s==null?void 0:s.userId};q(a),S(a),te(!1),i("success")},Oe=()=>{i("medium"),n("logout_joke")},yt=((Fe=je.find(t=>t.id===(s==null?void 0:s.departmentId)))==null?void 0:Fe.name)||"未设置",Z=t=>{switch(t){case"permanent_admin":return"永久管理员";case"long_term_admin":return"长期管理员";case"temp_admin":return"临时管理员";default:return"普通成员"}},Ct=t=>{switch(t){case"permanent_admin":return"bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400 border-amber-200 dark:border-amber-500/30";case"long_term_admin":return"bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 border-blue-200 dark:border-blue-500/30";case"temp_admin":return"bg-green-100 dark:bg-green-500/20 text-green-600 dark:text-green-400 border-green-200 dark:border-green-500/30";default:return"bg-slate-500/10 text-slate-500 dark:text-slate-400 border-slate-500/20"}},_t=t=>t==="permanent_admin"||t==="long_term_admin"||t==="temp_admin",St=()=>{is(m),xt(m),n(null),i("success"),alert("全局配置已更新")},It=async t=>{var r;const a=(r=t.target.files)==null?void 0:r[0];if(a)try{const o=await tt(a,600,.8);f(d=>({...d,contactQrCode:o}))}catch{alert("图片上传失败")}},Ge=(t,a=16)=>{const r={size:a};switch(t){case"CalendarPlus":return e.jsx(us,{...r});case"ArrowUpRight":return e.jsx(gs,{...r});case"Lightbulb":return e.jsx(bs,{...r});case"Bug":return e.jsx(hs,{...r});case"Github":return e.jsx(ms,{...r});case"Calendar":return e.jsx(We,{...r});case"BookOpen":return e.jsx(xs,{...r});case"Globe":return e.jsx(Ke,{...r});case"Link":return e.jsx(lt,{...r});case"FileText":return e.jsx(Ss,{...r});case"Monitor":return e.jsx(cs,{...r});case"Users":return e.jsx(os,{...r});case"Image":return e.jsx(_s,{...r});case"Briefcase":return e.jsx(Cs,{...r});case"Zap":return e.jsx(it,{...r});case"Coffee":return e.jsx(ys,{...r});case"Download":return e.jsx(ge,{...r});case"Clock":return e.jsx(Ns,{...r});case"MessageCircle":return e.jsx(vs,{...r});case"Book":return e.jsx(ks,{...r});case"Cloud":return e.jsx(ws,{...r});case"Plus":return e.jsx(ds,{...r});default:return e.jsx(lt,{...r})}},zt=["CalendarPlus","ArrowUpRight","Lightbulb","Bug","Github","Calendar","BookOpen","Globe","Link","FileText","Monitor","Users","Image","Briefcase","Zap","Coffee","Download","Clock","MessageCircle","Book","Cloud"],Dt=({value:t,onChange:a})=>{const[r,o]=l.useState(!1),d=l.useRef(null),[h,u]=l.useState({}),g=b=>{if(b.stopPropagation(),!r&&d.current){const X=d.current.getBoundingClientRect(),Ht=X.bottom+window.scrollY+5,Jt=X.left+window.scrollX,Vt=window.innerHeight,He=220;let Je=Ht;X.bottom+He>Vt&&(Je=X.top+window.scrollY-He-5),u({position:"fixed",top:Je,left:Jt,zIndex:99999,width:"260px"})}o(!r)};return l.useEffect(()=>{const b=()=>o(!1);return r&&window.addEventListener("click",b),()=>window.removeEventListener("click",b)},[r]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{ref:d,onClick:g,className:"p-2 border border-slate-200 dark:border-white/10 rounded-lg flex items-center gap-2 bg-white dark:bg-white/5 hover:bg-slate-50 dark:hover:bg-white/10",children:[Ge(t),e.jsx("span",{className:"text-xs text-slate-500",children:t})]}),r&&ot.createPortal(e.jsx("div",{style:h,className:"bg-white dark:bg-gray-800 border border-slate-200 dark:border-white/10 rounded-xl shadow-2xl p-2 grid grid-cols-5 gap-1 animate-fade-in",onClick:b=>b.stopPropagation(),children:zt.map(b=>e.jsx("button",{onClick:()=>{a(b),o(!1)},className:`p-2 rounded-lg flex justify-center hover:bg-slate-100 dark:hover:bg-white/10 ${t===b?"bg-indigo-50 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-300":"text-slate-500 dark:text-slate-400"}`,title:b,children:Ge(b,18)},b))}),document.body)]})},Et=()=>{ne(""),O("temp_admin"),De(""),de(""),oe(!1),n("admin_grant"),i("medium")},Pt=async()=>{if(!L||!/^[A-Za-z0-9+/=]{16}$/.test(L)){oe(!0),i("error"),setTimeout(()=>oe(!1),500);return}Ee(!0),$(0),i("heavy"),setTimeout(()=>{$(1),i("light")},1e3),setTimeout(()=>{$(2),i("medium")},2e3),setTimeout(()=>{$(3),i("heavy")},3e3),setTimeout(async()=>{V(!0);const a=Date.now(),r=p==="long_term_admin",o={type:"auth_token",sender_uid:s==null?void 0:s.userId,target_uid:L,role:p,msg:ze||dt,iat:a,exp:a+600*1e3,inheriting:r},d=P.HmacSHA256(JSON.stringify(o),ee).toString(),h={...o,sig:d};try{const u=await st(JSON.stringify(h));de(u),ht(h.exp),i("success")}catch{alert("生成凭证失败")}finally{V(!1),Ee(!1)}},3500)},Te=()=>{if(!G)return;const t=document.createElement("a");t.href=G,t.download=`eurasia_auth_${p}_${new Date().toISOString().split("T")[0]}.png`,document.body.appendChild(t),t.click(),document.body.removeChild(t),i("selection")},At=()=>{if(s){if(s.identity==="permanent_admin"){alert("永久管理员身份无法降级。");return}if(confirm("确认交接完成？此操作将立即移除您的管理员权限。")){const t={...s,identity:"user"};q(t),S(t),n(null),i("heavy"),alert("卸任成功，感谢您的付出。"),window.location.reload()}}},Mt=()=>{try{i("selection");const t=at(C),a=rt(t,y?F:void 0),r=new Blob([a],{type:"application/json"}),o=URL.createObjectURL(r),d=document.createElement("a");d.href=o,d.download=`eurasia_backup_${C}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(o),n(null),i("success")}catch(t){alert("导出失败"),console.error(t)}},Rt=t=>{var o;const a=(o=t.target.files)==null?void 0:o[0];if(!a)return;const r=new FileReader;r.onload=d=>{var h;try{const u=(h=d.target)==null?void 0:h.result;try{const g=JSON.parse(u);if(g.h&&g.t)if(Ue(u),g.e)Me(""),j(null),n("import_file_decrypt");else try{const b=K(u);confirm("导入将覆盖当前所有数据，确定继续吗？")&&(E(b),alert("数据恢复成功，即将刷新页面"),window.location.reload())}catch{alert("数据校验失败 (MD5 Mismatch)")}else confirm("检测到旧版备份格式，导入将覆盖当前所有数据，确定继续吗？")&&(E(g),alert("数据恢复成功，即将刷新页面"),window.location.reload())}catch{alert("文件格式错误")}}catch{alert("读取文件失败")}},r.readAsText(a),he.current&&(he.current.value="")},Ut=()=>{try{const t=K(Re,me);confirm("密码正确！导入将覆盖当前所有数据，确定继续吗？")&&(E(t),alert("数据恢复成功，即将刷新页面"),window.location.reload())}catch{i("error"),j("密码错误或数据损坏")}},Lt=async()=>{V(!0),i("medium");try{const t=at(C),a=rt(t,y?F:void 0),r=await st(a);xe(r),i("success")}catch(t){alert("生成失败"),console.error(t)}finally{V(!1)}},Ot=()=>{if(!J)return;const t=document.createElement("a");t.href=J,t.download=`eurasia_${C}_cimbar.png`,document.body.appendChild(t),t.click(),document.body.removeChild(t),i("selection")},Gt=t=>{var d;const a=(d=t.target.files)==null?void 0:d[0];if(!a)return;const r=URL.createObjectURL(a);Ae(r),j(null);const o=new Image;o.onload=async()=>{try{const h=await ns(o);try{const g=JSON.parse(h);if(g.type==="auth_token"){Tt(g);return}}catch{}if(Ue(h),i("success"),JSON.parse(h).e)_("decrypt");else try{const g=K(h);Q(g),_("confirm")}catch{j("数据完整性校验失败 (MD5 mismatch)"),i("error")}}catch(h){console.error(h),j("无法识别有效的彩色配置码，请确保图片清晰且未经压缩"),i("error")}},o.src=r},Tt=t=>{_("auth_check"),Le("verifying"),Pe(""),setTimeout(()=>{const{sig:a,...r}=t,o=P.HmacSHA256(JSON.stringify(r),ee).toString();let d=null;if(a!==o?d="凭证签名无效，可能已被篡改":t.target_uid!==(s==null?void 0:s.userId)?d="个人编号不匹配，无法激活此权限":Date.now()>t.exp?d="凭证已过期，请重新生成":t.role==="long_term_admin"&&((s==null?void 0:s.identity)==="long_term_admin"||(s==null?void 0:s.identity)==="permanent_admin")?d="您已拥有长期管理员或更高身份，无法接受此传承":t.role==="permanent_admin"&&(d="非法操作：永久管理员权限无法通过二维码授予"),d){if(j(d),i("error"),t.sender_uid&&t.role&&t.role!=="permanent_admin"){const h={s:t.sender_uid,r:"long_term_admin",t:Date.now()},u=P.AES.encrypt(JSON.stringify(h),ee).toString();Pe(u)}return}Q(t),Le("success"),i("success"),t.inheriting&&setTimeout(()=>{_("legacy_reveal"),i("medium")},1e3)},2e3)},$e=()=>{if(!x||!s)return;const t=x.role,a={...s,identity:t};q(a),S(a),alert(`权限激活成功！当前身份：${Z(t)}`),i("heavy"),window.location.reload()},$t=()=>{try{const t=K(Re,me);Q(t),_("confirm"),j(null),i("success")}catch(t){i("error"),t.message==="DECRYPTION_FAILED"?j("密码错误，解密失败"):t.message==="INTEGRITY_CHECK_FAILED"?j("数据校验失败，文件可能已损坏"):j("未知错误")}},Ft=()=>{if(x){const a=x.exportVersion===2?x.active:x;if(!a.profile&&!a.todos&&(a.settings||a.globalConfig||a.departments)){if(a.settings){const r=Ve();a.settings={...a.settings,darkMode:r.darkMode,hapticIntensity:r.hapticIntensity}}i("heavy"),E(x),alert("全局配置同步成功，个人设置/个人编号不受影响")}else i("heavy"),E(x),alert("数据恢复成功！");window.location.reload()}},Bt=()=>{if(ce)try{const t=P.AES.decrypt(ce,ee),a=JSON.parse(t.toString(P.enc.Utf8));if(a.s===(s==null?void 0:s.userId)){if(Date.now()-a.t>36e5){alert("恢复代码已过期");return}const r={...s,identity:a.r};q(r),S(r),n(null),i("success"),alert(`身份恢复成功！欢迎回来，${Z(a.r)}`),window.location.reload()}else alert("该代码不属于此账号，无法恢复")}catch{alert("无效的恢复代码")}};return e.jsxs("div",{className:"w-full h-full p-6 md:p-8 overflow-y-auto pb-24 animate-fade-in hide-scrollbar text-slate-800 dark:text-white",children:[e.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
        .animate-shake {
          animation: shake 0.3s ease-in-out;
        }
        .legacy-glow {
          text-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
      `}),e.jsxs("div",{className:"max-w-[1800px] mx-auto h-full flex flex-col",children:[e.jsxs("div",{className:"flex flex-row items-end justify-between mb-6 gap-4 shrink-0",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-bold text-slate-900 dark:text-white tracking-tight text-glow",children:"系统设置"}),e.jsx("p",{className:"text-slate-500 dark:text-white/60 mt-1 text-base",children:"个性化配置与数据管理中心"})]}),e.jsxs("button",{onClick:()=>{n("version_info"),i("light")},className:"glass-card text-indigo-500 dark:text-indigo-300 border-indigo-200 dark:border-indigo-500/30 px-4 py-1.5 rounded-full text-xs font-mono tracking-wide active:scale-95 transition-transform hover:bg-white/50 dark:hover:bg-white/10 flex items-center gap-2 shadow-sm",children:[e.jsx(Ze,{size:12,className:"animate-pulse"})," v2.5.0"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1 min-h-0",children:[e.jsxs("div",{className:"lg:col-span-4 flex flex-col gap-6 h-full",children:[e.jsxs("div",{className:"glass-panel rounded-[2rem] p-6 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute -top-20 -left-20 w-40 h-40 bg-indigo-500 rounded-full blur-[60px] opacity-20 group-hover:opacity-40 transition-opacity duration-700"}),e.jsxs("div",{className:"flex justify-between items-start relative z-10 mb-4",children:[e.jsxs("h3",{className:"font-bold text-slate-900 dark:text-white flex items-center gap-2 text-lg",children:[e.jsx(Xe,{className:"text-indigo-500 dark:text-indigo-400"})," 个人档案"]}),!M&&e.jsx("button",{onClick:()=>{te(!0),i("selection")},className:"p-3 bg-black/5 dark:bg-white/5 hover:bg-black/10 dark:hover:bg-white/10 text-indigo-500 dark:text-indigo-300 rounded-full transition-colors active:scale-95",children:e.jsx(fs,{size:18})})]}),e.jsxs("div",{className:"flex flex-col items-center relative z-10",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full p-1.5 border border-white/20 shadow-2xl bg-white/5 backdrop-blur-md",children:e.jsx("div",{className:"w-full h-full rounded-full overflow-hidden relative bg-black/5 dark:bg-black/20",children:M&&re?e.jsx("img",{src:re,className:"w-full h-full object-cover"}):s!=null&&s.avatar?e.jsx("img",{src:s.avatar,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 dark:text-white/30",children:e.jsx(Xe,{size:32})})})}),M&&e.jsxs("label",{className:"absolute bottom-0 right-0 w-8 h-8 bg-indigo-500 text-white rounded-full flex items-center justify-center shadow-lg cursor-pointer hover:bg-indigo-600 transition-colors transform hover:scale-105 border border-white/20",children:[e.jsx(Zt,{size:14}),e.jsx("input",{type:"file",accept:"image/*",onChange:vt,className:"hidden"})]})]}),M?e.jsxs("div",{className:"w-full space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] text-slate-500 dark:text-white/50 font-bold uppercase tracking-wider",children:"姓名"}),e.jsx("input",{value:se,onChange:t=>we(t.target.value),className:"w-full p-2.5 glass-input rounded-xl text-sm font-bold text-center focus:outline-none"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] text-slate-500 dark:text-white/50 font-bold uppercase tracking-wider",children:"职位"}),e.jsx("input",{value:ve,onChange:t=>Ne(t.target.value),className:"w-full p-2.5 glass-input rounded-xl text-sm text-center focus:outline-none"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-[10px] text-slate-500 dark:text-white/50 font-bold uppercase tracking-wider",children:"所属部门"}),e.jsx("select",{value:ae,onChange:t=>ke(t.target.value),className:"w-full p-2.5 glass-input rounded-xl text-sm text-center focus:outline-none appearance-none",children:je.map(t=>e.jsx("option",{value:t.id,className:"text-black",children:t.name},t.id))})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-200 dark:border-white/10",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-[10px] text-slate-500 dark:text-white/50 font-bold uppercase tracking-wider",children:"所属组织"}),e.jsx("button",{onClick:()=>Ie(!I),className:`text-[10px] px-2 py-0.5 rounded border transition-colors ${I?"bg-indigo-50 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-300 border-indigo-200 dark:border-indigo-500/30":"bg-slate-100 dark:bg-white/5 text-slate-500 dark:text-white/50 border-transparent"}`,children:I?"标准命名":"自定义命名"})]}),I?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-xs font-bold text-slate-400",children:"西安欧亚学院"}),e.jsx("select",{value:le,onChange:t=>Se(t.target.value),className:"flex-1 p-2 glass-input rounded-lg text-xs font-bold text-center focus:outline-none appearance-none truncate",children:Xt.map(t=>e.jsx("option",{value:t,className:"text-black",children:t},t))})]}),e.jsx("input",{value:R,onChange:t=>ie(t.target.value),className:"w-full p-2.5 glass-input rounded-xl text-sm text-center focus:outline-none",placeholder:"学生成长促进会"})]}):e.jsx("input",{value:R,onChange:t=>ie(t.target.value),className:"w-full p-2.5 glass-input rounded-xl text-sm text-center focus:outline-none font-bold",placeholder:"输入完整组织名称"})]}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsx("label",{className:"text-[10px] text-slate-500 dark:text-white/50 font-bold uppercase tracking-wider",children:"生日 (MM-DD)"}),e.jsx("input",{value:Ce,onChange:t=>_e(t.target.value),className:"w-full p-2.5 glass-input rounded-xl text-sm text-center focus:outline-none",placeholder:"01-01"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-2.5 rounded-xl text-sm font-bold text-slate-500 dark:text-white/50 hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:"取消"}),e.jsx("button",{onClick:Nt,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-bold shadow-lg shadow-indigo-500/30 hover:bg-indigo-700 transition-colors active:scale-95",children:"保存"})]})]}):e.jsxs("div",{className:"text-center w-full",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2 text-glow",children:(s==null?void 0:s.name)||"未命名"}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 mb-3",children:[e.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 dark:bg-white/10 text-indigo-500 dark:text-indigo-300 text-xs font-bold border border-indigo-100 dark:border-white/10",children:yt}),e.jsxs("div",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold border ${Ct((s==null?void 0:s.identity)||"user")}`,children:[(s==null?void 0:s.identity)&&s.identity!=="user"&&e.jsx(W,{size:10,fill:"currentColor"}),Z((s==null?void 0:s.identity)||"user")]})]}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-white/50 font-medium mb-3",children:(s==null?void 0:s.position)||"成员"}),e.jsxs("div",{className:"text-xs text-slate-400 dark:text-white/40 mb-3 px-4 truncate max-w-full",children:[e.jsx(Wt,{size:12,className:"inline mr-1"}),(s==null?void 0:s.organization)||"未设置组织"]}),e.jsxs("button",{onClick:kt,className:"w-full bg-black/5 dark:bg-white/5 rounded-lg p-2 font-mono text-[10px] text-slate-500 dark:text-white/50 border border-black/5 dark:border-white/5 mb-3 flex items-center justify-center gap-2 active:scale-95 transition-transform hover:bg-black/10 dark:hover:bg-white/10",children:["ID: ",(s==null?void 0:s.userId)||"--------",e.jsx(Es,{size:10})]}),(s==null?void 0:s.registerDate)&&e.jsxs("div",{className:"text-xs text-slate-400 dark:text-white/30 flex items-center justify-center gap-1",children:[e.jsx(We,{size:12})," 注册于 ",s.registerDate]})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-2xl p-5 flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${k.darkMode?"bg-indigo-500/30 text-indigo-300":"bg-orange-500/20 text-orange-400"}`,children:k.darkMode?e.jsx(qt,{size:16}):e.jsx(Kt,{size:16})}),e.jsx("div",{children:e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"深色模式"})})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:k.darkMode,onChange:jt}),e.jsx("div",{className:"w-9 h-5 bg-slate-300 dark:bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-600"})]})]}),e.jsx("div",{className:"h-px bg-gray-200 dark:bg-white/10 w-full"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center bg-purple-500/20 text-purple-400",children:e.jsx(Bs,{size:16})}),e.jsx("div",{className:"flex-1",children:e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"触感反馈"})})]}),e.jsx("div",{className:"flex gap-2 p-1 bg-black/5 dark:bg-white/5 rounded-xl border border-black/5 dark:border-white/5",children:["关闭","轻柔","适中","强烈"].map((t,a)=>e.jsx("button",{onClick:()=>wt(a),className:`flex-1 py-1.5 rounded-lg text-[10px] font-bold transition-all ${k.hapticIntensity===a?"bg-white dark:bg-white/20 text-purple-600 dark:text-purple-300 shadow-sm":"text-slate-400 dark:text-white/40 hover:text-slate-600 dark:hover:text-white/70"}`,children:t},a))})]})]}),e.jsxs("div",{className:"hidden lg:flex flex-col gap-2 mt-auto",children:[e.jsx("button",{onClick:()=>n("restore_identity"),className:"w-full p-2 text-center text-[10px] text-slate-400 hover:text-indigo-500 transition-colors",children:"申请恢复管理员身份"}),e.jsxs("button",{onClick:Oe,className:"w-full glass-panel border border-red-500/20 text-red-500 dark:text-red-400 font-bold py-3.5 rounded-[2rem] hover:bg-red-500/10 hover:text-red-600 dark:hover:text-red-300 active:scale-[0.98] transition-all flex items-center justify-center gap-3 group shadow-sm",children:[e.jsx(fe,{size:16,className:"group-hover:-translate-x-1 transition-transform"}),"退出登录"]})]})]}),e.jsxs("div",{className:"lg:col-span-8 flex flex-col h-full gap-6",children:[_t(s==null?void 0:s.identity)&&e.jsxs("div",{className:"glass-panel rounded-[2rem] overflow-hidden bg-white/50 dark:bg-white/5 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-500/5 to-blue-500/5 pointer-events-none"}),e.jsxs("div",{className:"relative z-10 p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl flex items-center justify-center text-white shadow-lg",children:e.jsx(zs,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3 tracking-tight",children:"管理员控制台"}),e.jsx("p",{className:"text-slate-500 dark:text-white/60 text-xs mt-1 font-medium",children:"Administrator Console"})]})]}),e.jsx("button",{onClick:()=>n("help_admin"),className:"p-2 text-slate-400 hover:text-indigo-500 transition-colors",children:e.jsx(qe,{size:20})})]}),(s==null?void 0:s.identity)==="temp_admin"&&e.jsxs("div",{className:"bg-amber-100 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/20 p-4 rounded-xl mb-6 flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-500 text-white rounded-lg shrink-0 animate-pulse",children:e.jsx($s,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-amber-700 dark:text-amber-400 text-sm mb-1",children:"临时管理员权限提示"}),e.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-300/80 leading-relaxed",children:["您的临时管理权限有效期仅为 ",e.jsx("span",{className:"font-bold",children:"12小时"}),"。请抓紧时间完成配置更新与管理操作。过期后将自动降级为普通用户。"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[((s==null?void 0:s.identity)==="permanent_admin"||(s==null?void 0:s.identity)==="long_term_admin")&&e.jsxs("button",{onClick:()=>{O((s.identity==="permanent_admin","long_term_admin")),Et()},className:"bg-white/60 dark:bg-white/5 border border-white/60 dark:border-white/10 p-4 rounded-xl flex flex-col items-center justify-center text-center gap-2 hover:bg-white/80 dark:hover:bg-white/10 transition-colors active:scale-95 group relative overflow-hidden",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-500/20 text-amber-600 dark:text-amber-400 flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(nt,{size:20})}),e.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"权限传承 / 分配"}),e.jsx("span",{className:"text-[10px] text-slate-400 dark:text-white/40",children:"Grant Authority"})]}),e.jsxs("button",{onClick:()=>{f(ct),U("basic"),n("global_edit"),i("selection")},className:"bg-white/60 dark:bg-white/5 border border-white/60 dark:border-white/10 p-4 rounded-xl flex flex-col items-center justify-center text-center gap-2 hover:bg-white/80 dark:hover:bg-white/10 transition-colors active:scale-95 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(Ke,{size:20})}),e.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"全局资源配置"}),e.jsx("span",{className:"text-[10px] text-slate-400 dark:text-white/40",children:"Manage Links & Info"})]}),e.jsxs("button",{onClick:()=>{xe(""),z("global_only"),H(!1),B(""),n("export_cimbar"),i("selection")},className:"bg-white/60 dark:bg-white/5 border border-white/60 dark:border-white/10 p-4 rounded-xl flex flex-col items-center justify-center text-center gap-2 hover:bg-white/80 dark:hover:bg-white/10 transition-colors active:scale-95 group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-500/20 text-purple-600 dark:text-purple-400 flex items-center justify-center group-hover:scale-110 transition-transform",children:e.jsx(ps,{size:20})}),e.jsx("span",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"分享全局配置"}),e.jsx("span",{className:"text-[10px] text-slate-400 dark:text-white/40",children:"Share Config (Safe)"})]})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-[2rem] flex flex-col overflow-hidden bg-white/50 dark:bg-white/5 flex-1 min-h-[400px]",children:[e.jsx("div",{className:"relative shrink-0 border-b border-gray-200 dark:border-white/10 overflow-hidden bg-slate-50/50 dark:bg-[#0f172a]",children:e.jsx("div",{className:"relative z-10 p-6 md:p-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"relative w-12 h-12 bg-white dark:bg-white/10 rounded-2xl flex items-center justify-center shadow-lg border border-white/50 dark:border-white/10 group overflow-hidden",children:e.jsx(W,{className:"relative z-10 text-blue-600 dark:text-indigo-400",size:24,strokeWidth:2})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-3 tracking-tight",children:"安全配置中心"}),e.jsx("p",{className:"text-slate-500 dark:text-white/60 text-xs mt-1 font-medium",children:"迁移设备 • 应用更新备份 • 数据传输"})]})]}),e.jsx("button",{onClick:()=>n("help_security"),className:"p-2 text-slate-400 hover:text-indigo-500 transition-colors",children:e.jsx(qe,{size:20})})]})})}),e.jsxs("div",{className:"flex-1 flex flex-col md:flex-row p-6 md:p-8 gap-8 overflow-y-auto hide-scrollbar",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/10 dark:bg-blue-500/20 text-blue-500 dark:text-blue-400 flex items-center justify-center border border-blue-500/20 dark:border-blue-500/30",children:e.jsx(As,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"标准归档"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-white/50",children:"JSON 格式备份文件"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{H(!1),B(""),z("full"),n("export_file"),i("selection")},className:"w-full py-3.5 glass-card hover:bg-black/5 dark:hover:bg-white/10 rounded-2xl flex items-center justify-between px-5 transition-all group active:scale-[0.98]",children:e.jsxs("span",{className:"font-bold text-slate-700 dark:text-white/80 flex items-center gap-2 text-sm",children:[e.jsx(ge,{size:16})," 导出数据文件"]})}),e.jsxs("label",{className:"w-full py-3.5 glass-card hover:bg-black/5 dark:hover:bg-white/10 rounded-2xl flex items-center justify-between px-5 transition-all group active:scale-[0.98] cursor-pointer",onClick:()=>i("selection"),children:[e.jsxs("span",{className:"font-bold text-slate-700 dark:text-white/80 flex items-center gap-2 text-sm",children:[e.jsx(es,{size:16})," 恢复备份文件"]}),e.jsx("input",{ref:he,type:"file",accept:".json",onChange:Rt,className:"hidden"})]})]})]}),e.jsx("div",{className:"hidden md:block w-px bg-gray-200 dark:bg-white/10 self-stretch mx-2"}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/10 dark:bg-indigo-500/20 text-indigo-500 dark:text-indigo-400 flex items-center justify-center border border-indigo-500/20 dark:border-indigo-500/30",children:e.jsx(js,{size:16})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-900 dark:text-white text-sm",children:"彩色码传输"}),e.jsx("p",{className:"text-[10px] text-slate-500 dark:text-white/50",children:"支持备份恢复与权限激活"})]})]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{xe(""),B(""),H(!1),z("full"),n("export_cimbar"),i("selection")},className:"flex-1 py-5 bg-indigo-500 hover:bg-indigo-600 dark:bg-indigo-600 dark:hover:bg-indigo-700 text-white rounded-2xl shadow-lg shadow-indigo-500/30 active:scale-[0.98] transition-all flex flex-col items-center justify-center gap-1.5 group border border-indigo-400/50",children:[e.jsx(ts,{size:24,className:"group-hover:scale-110 transition-transform text-white text-always-white"}),e.jsx("span",{className:"font-bold text-xs text-white text-always-white",children:"生成配置码"})]}),e.jsxs("button",{onClick:()=>{_("upload"),Q(null),Ae(""),n("import_cimbar"),i("selection")},className:"flex-1 py-5 glass-card border border-dashed border-indigo-400/50 text-indigo-500 dark:text-indigo-300 rounded-2xl hover:bg-indigo-500/10 dark:hover:bg-indigo-500/20 transition-all active:scale-[0.98] flex flex-col items-center justify-center gap-1.5 font-bold text-xs",children:[e.jsx(ue,{size:24}),"扫码获取配置 / 恢复数据"]})]})})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 lg:hidden",children:[e.jsx("button",{onClick:()=>n("restore_identity"),className:"w-full p-3 rounded-xl border border-dashed border-slate-300 dark:border-white/20 text-slate-500 dark:text-white/50 text-xs font-bold hover:bg-black/5 dark:hover:bg-white/5 mb-3",children:"恢复管理员身份"}),e.jsxs("button",{onClick:Oe,className:"w-full glass-card border border-red-500/20 text-red-500 dark:text-red-400 font-bold py-3.5 rounded-[2rem] hover:bg-red-500/10 hover:text-red-600 dark:hover:text-red-300 flex items-center justify-center gap-3 group shadow-sm active:scale-[0.98] transition-all",children:[e.jsx(fe,{size:16})," 退出登录"]})]})]}),c==="admin_grant"&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsx("div",{className:`glass-panel rounded-3xl p-6 md:p-8 w-full max-w-sm shadow-2xl relative bg-white/95 dark:bg-black/60 flex flex-col items-center text-center transition-all ${gt?"animate-shake border-red-500":""}`,onClick:t=>t.stopPropagation(),children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white p-2 rounded-2xl shadow-inner border border-gray-200 mb-6",children:e.jsx("img",{src:G,className:"w-48 h-48 object-contain",style:{imageRendering:"pixelated"}})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-1",children:"凭证已生成"}),e.jsxs("p",{className:"text-xs text-slate-500 mb-6",children:["请接收者在“安全配置中心”扫描此码",e.jsx("br",{}),"有效期至: ",new Date(mt).toLocaleTimeString()]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx("button",{onClick:()=>{de(""),ne("")},className:"px-4 py-3 rounded-xl font-bold bg-gray-100 dark:bg-white/10 text-slate-600 dark:text-white",children:"返回"}),p==="long_term_admin"&&(s==null?void 0:s.identity)!=="permanent_admin"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Te,className:"px-4 py-3 rounded-xl font-bold bg-indigo-50 dark:bg-indigo-500/20 text-indigo-600 dark:text-indigo-300",children:"保存"}),e.jsx("button",{onClick:At,className:"flex-1 py-3 rounded-xl font-bold bg-red-600 text-white shadow-lg hover:bg-red-700",children:"交接并卸任"})]}):e.jsx("button",{onClick:Te,className:"flex-1 py-3 rounded-xl font-bold bg-indigo-600 text-white shadow-lg hover:bg-indigo-700",children:"保存凭证"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-500/20 rounded-full flex items-center justify-center text-amber-500 dark:text-amber-400 mb-4",children:e.jsx(nt,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:p==="long_term_admin"?"权限传承 (Inheritance)":"权限分配 (Distribution)"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-white/60 mb-6 leading-relaxed",children:p==="long_term_admin"?(s==null?void 0:s.identity)==="permanent_admin"?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-amber-600 dark:text-amber-400 font-bold block mb-1",children:"你是第一批开拓者，传承后身份保留不会降级。"}),"愿你审慎行使无限传承的权利，寻找真正眼中有光、心中有火的继任者，将这份温暖与秩序传递下去。"]}):"生成长期管理员凭证。授予后请在确认对方接收成功后，手动点击卸任以完成交接。":"生成临时管理员凭证，有效期12小时。"}),e.jsxs("div",{className:"w-full space-y-4 mb-6",children:[e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-white/50 uppercase tracking-wider ml-1",children:"目标用户 ID (16位)"}),e.jsx("input",{value:L,onChange:t=>ne(t.target.value.trim()),placeholder:"请输入接收者的个人编号",className:"w-full p-4 glass-input rounded-xl text-center font-mono tracking-widest focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition-all"})]}),p==="long_term_admin"&&e.jsxs("div",{className:"space-y-2 text-left animate-fade-in",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-white/50 uppercase tracking-wider ml-1",children:"传承寄语 (可选)"}),e.jsx("textarea",{value:ze,onChange:t=>De(t.target.value),placeholder:dt,rows:3,className:"w-full p-3 glass-input rounded-xl text-sm leading-relaxed focus:border-amber-500 focus:ring-1 focus:ring-amber-500 transition-all resize-none"})]}),e.jsxs("div",{className:"flex p-1 bg-black/5 dark:bg-white/5 rounded-xl",children:[e.jsx("button",{onClick:()=>O("temp_admin"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${p==="temp_admin"?"bg-white dark:bg-white/20 shadow-sm text-indigo-600 dark:text-white":"text-slate-500 dark:text-white/50"}`,children:"临时权限"}),((s==null?void 0:s.identity)==="permanent_admin"||(s==null?void 0:s.identity)==="long_term_admin")&&e.jsx("button",{onClick:()=>O("long_term_admin"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${p==="long_term_admin"?"bg-white dark:bg-white/20 shadow-sm text-amber-600 dark:text-amber-400":"text-slate-500 dark:text-white/50"}`,children:"长期传承"})]})]}),bt?e.jsxs("div",{className:"space-y-3",children:[e.jsx(be,{className:"animate-spin mx-auto text-indigo-500",size:24}),e.jsxs("p",{className:"text-xs font-mono text-indigo-500",children:[T===0&&"INITIALIZING SECURE CHANNEL...",T===1&&"VERIFYING BIOMETRICS...",T===2&&"ENCRYPTING PAYLOAD...",T===3&&"SIGNING TOKEN..."]})]}):e.jsx("button",{onClick:Pt,className:`w-full py-4 rounded-xl font-bold text-white shadow-lg transition-all active:scale-95 ${p==="long_term_admin"?"bg-gradient-to-r from-amber-500 to-orange-600 shadow-orange-500/30":"bg-indigo-600 hover:bg-indigo-700 shadow-indigo-500/30"}`,children:"生成授权凭证"})]})})})}),c==="logout_joke"&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsxs("div",{className:"glass-panel rounded-3xl p-6 w-full max-w-sm text-center bg-white/95 dark:bg-black/60",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-500/20 rounded-full flex items-center justify-center text-red-500 mx-auto mb-4",children:e.jsx(fe,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"确认退出?"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-white/60 mb-6",children:"退出后需重新登录或通过恢复码找回身份。"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>n(null),className:"flex-1 py-3 bg-gray-100 dark:bg-white/10 rounded-xl font-bold text-slate-600 dark:text-white/80",children:"取消"}),e.jsx("button",{onClick:()=>{ss(),localStorage.setItem("eurasia_logged_out","true"),window.location.reload()},className:"flex-1 py-3 bg-red-600 text-white rounded-xl font-bold shadow-lg",children:"确认退出"})]})]})})}),c==="restore_identity"&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsxs("div",{className:"glass-panel rounded-3xl p-6 w-full max-w-sm text-center bg-white/95 dark:bg-black/60",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4",children:"恢复身份"}),e.jsx("textarea",{value:ce,onChange:t=>ut(t.target.value),placeholder:"在此输入恢复代码...",className:"w-full h-24 p-3 glass-input rounded-xl text-xs font-mono mb-4 focus:outline-none"}),e.jsx("button",{onClick:Bt,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg",children:"提交恢复"})]})})}),c==="version_info"&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsxs("div",{className:"glass-panel rounded-[2rem] w-full max-w-md bg-white/95 dark:bg-gray-900/90 h-[75vh] flex flex-col relative overflow-hidden",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/10 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-purple-500/10 rounded-full blur-2xl -ml-10 -mb-10 pointer-events-none"}),e.jsx("div",{className:"p-6 pb-2 shrink-0",children:e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-indigo-500 to-purple-600 p-6 text-white rounded-3xl mb-6 shadow-xl shadow-indigo-500/20",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20",children:e.jsx(Ze,{size:60})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"inline-flex items-center gap-1 bg-white/20 backdrop-blur-sm px-2 py-0.5 rounded-full text-[10px] font-bold mb-2 border border-white/20",children:[e.jsx(it,{size:10,fill:"currentColor"})," MAJOR UPDATE"]}),e.jsx("h1",{className:"text-4xl font-bold tracking-tight mb-1",children:"v2.5.0"}),e.jsx("p",{className:"text-white/80 text-sm font-medium",children:"CIMBAR Protocol & Safety Core"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-6 px-6 pb-6 custom-scrollbar",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-2xl border border-gray-100 dark:border-white/5 flex flex-col items-center text-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-500/20 text-blue-500 dark:text-blue-300 flex items-center justify-center mb-1",children:e.jsx(ue,{size:20})}),e.jsx("div",{className:"font-bold text-xs text-slate-700 dark:text-white/90",children:"CIMBAR 传输"}),e.jsx("div",{className:"text-[10px] text-slate-400 dark:text-white/50 leading-tight",children:"高密度彩色码配置同步"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-2xl border border-gray-100 dark:border-white/5 flex flex-col items-center text-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 dark:bg-green-500/20 text-green-500 dark:text-green-300 flex items-center justify-center mb-1",children:e.jsx(W,{size:20})}),e.jsx("div",{className:"font-bold text-xs text-slate-700 dark:text-white/90",children:"灾难恢复"}),e.jsx("div",{className:"text-[10px] text-slate-400 dark:text-white/50 leading-tight",children:"权限熔断与身份找回"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-2xl border border-gray-100 dark:border-white/5 flex flex-col items-center text-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-500/20 text-purple-500 dark:text-purple-300 flex items-center justify-center mb-1",children:e.jsx(as,{size:20})}),e.jsx("div",{className:"font-bold text-xs text-slate-700 dark:text-white/90",children:"视觉升级"}),e.jsx("div",{className:"text-[10px] text-slate-400 dark:text-white/50 leading-tight",children:"全新流体与玻璃拟态UI"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 p-4 rounded-2xl border border-gray-100 dark:border-white/5 flex flex-col items-center text-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 dark:bg-amber-500/20 text-amber-500 dark:text-amber-300 flex items-center justify-center mb-1",children:e.jsx(Ls,{size:20})}),e.jsx("div",{className:"font-bold text-xs text-slate-700 dark:text-white/90",children:"身份传承"}),e.jsx("div",{className:"text-[10px] text-slate-400 dark:text-white/50 leading-tight",children:"加密寄语与权限交接"})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-sm text-slate-800 dark:text-white flex items-center gap-2 mb-4",children:[e.jsx(Rs,{size:16,className:"text-slate-400"})," 更新日志"]}),e.jsxs("div",{className:"relative pl-4 border-l-2 border-gray-100 dark:border-white/10 space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[21px] top-0 w-3 h-3 bg-indigo-500 rounded-full border-2 border-white dark:border-gray-900"}),e.jsx("div",{className:"text-xs font-bold text-indigo-500 mb-1",children:"Feature"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-white/70",children:"新增 CIMBAR (Color Icon Matrix Barcode) 协议，支持离线环境下的复杂配置传输。"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[21px] top-0 w-3 h-3 bg-indigo-500 rounded-full border-2 border-white dark:border-gray-900"}),e.jsx("div",{className:"text-xs font-bold text-indigo-500 mb-1",children:"Improvement"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-white/70",children:"重构安全中心，增加身份恢复代码 (Recovery Code) 机制，防止误操作导致权限丢失。"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[21px] top-0 w-3 h-3 bg-indigo-500 rounded-full border-2 border-white dark:border-gray-900"}),e.jsx("div",{className:"text-xs font-bold text-indigo-500 mb-1",children:"UI/UX"}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-white/70",children:"优化深色模式下的对比度；新增触感反馈引擎；优化移动端手势操作。"})]})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-500/10 border border-blue-100 dark:border-blue-500/20 rounded-xl text-xs text-slate-600 dark:text-white/80 flex items-start gap-3",children:[e.jsx(rs,{size:16,className:"text-blue-500 shrink-0 mt-0.5"}),e.jsxs("div",{className:"leading-relaxed",children:[e.jsx("span",{className:"font-bold block text-blue-700 dark:text-blue-400 mb-1",children:"如何更新?"}),"由于采用 PWA 离线架构，请先在安全中心导出全量备份，卸载旧版应用后重新安装，最后导入备份即可。"]})]}),e.jsxs("div",{className:"p-6 bg-amber-50/50 dark:bg-amber-900/5 border border-amber-100 dark:border-amber-500/10 rounded-2xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 text-6xl text-amber-200 dark:text-amber-500/10 font-serif -mt-2 -ml-2 select-none",children:"“"}),e.jsx("p",{className:"relative z-10 text-xs text-amber-900/80 dark:text-amber-100/60 font-serif leading-relaxed italic text-center px-4",children:"这个项目起源于人文教育学院 2306 班的一名学子对“数字化秩序”的探索。代码或许是冰冷的逻辑，但传承是温热的脉搏。"}),e.jsx("div",{className:"text-center mt-3 text-[10px] text-amber-800/40 dark:text-amber-100/30 font-bold uppercase tracking-widest",children:"— To Successors"})]})]}),e.jsx("div",{className:"p-6 pt-2 shrink-0",children:e.jsx("button",{onClick:()=>n(null),className:"w-full py-3 bg-gray-100 dark:bg-white/10 rounded-xl font-bold text-slate-600 dark:text-white/80 hover:bg-gray-200 dark:hover:bg-white/20 transition-colors",children:"关闭"})})]})})}),c==="global_edit"&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsxs("div",{className:"glass-panel rounded-3xl p-6 w-full max-w-lg bg-white/95 dark:bg-black/60 max-h-[85vh] flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-4 shrink-0",children:"全局资源配置"}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 hide-scrollbar",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{onClick:()=>U("basic"),className:`flex-1 py-2 rounded-lg text-xs font-bold ${N==="basic"?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-white/10"}`,children:"基础信息"}),e.jsx("button",{onClick:()=>U("cards"),className:`flex-1 py-2 rounded-lg text-xs font-bold ${N==="cards"?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-white/10"}`,children:"首页卡片"}),e.jsx("button",{onClick:()=>U("guide"),className:`flex-1 py-2 rounded-lg text-xs font-bold ${N==="guide"?"bg-indigo-500 text-white":"bg-gray-100 dark:bg-white/10"}`,children:"教程文档"})]}),N==="basic"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500",children:"反馈链接 (Feedback URL)"}),e.jsx("input",{value:m.feedbackUrl,onChange:t=>f({...m,feedbackUrl:t.target.value}),className:"w-full p-2 glass-input rounded-lg text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500",children:"开源地址 (GitHub URL)"}),e.jsx("input",{value:m.githubUrl,onChange:t=>f({...m,githubUrl:t.target.value}),className:"w-full p-2 glass-input rounded-lg text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500",children:"联系电话"}),e.jsx("input",{value:m.contactPhone,onChange:t=>f({...m,contactPhone:t.target.value}),className:"w-full p-2 glass-input rounded-lg text-sm"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500",children:"联系二维码 (企业微信)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[m.contactQrCode&&e.jsx("img",{src:m.contactQrCode,className:"w-16 h-16 object-contain border rounded-lg"}),e.jsxs("label",{className:"px-4 py-2 bg-gray-100 dark:bg-white/10 rounded-lg text-xs font-bold cursor-pointer",children:["上传图片",e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:It})]})]})]})]}),N==="cards"&&e.jsx("div",{className:"space-y-4",children:["todoCard1","todoCard2","feedbackCard1","feedbackCard2","githubCard"].map(t=>{const a=m[t]||{};return e.jsxs("div",{className:"p-3 border border-gray-100 dark:border-white/10 rounded-xl bg-gray-50 dark:bg-white/5",children:[e.jsx("div",{className:"text-xs font-bold text-indigo-500 mb-2 uppercase",children:t}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsx("input",{value:a.title||"",onChange:r=>f({...m,[t]:{...a,title:r.target.value}}),placeholder:"标题",className:"p-2 glass-input rounded-lg text-xs"}),e.jsx("input",{value:a.subtitle||"",onChange:r=>f({...m,[t]:{...a,subtitle:r.target.value}}),placeholder:"副标题",className:"p-2 glass-input rounded-lg text-xs"})]}),["todoCard1","todoCard2"].includes(t)&&e.jsx("input",{value:a.url||"",onChange:r=>f({...m,[t]:{...a,url:r.target.value}}),placeholder:"URL",className:"w-full p-2 glass-input rounded-lg text-xs mb-2"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"图标:"}),e.jsx(Dt,{value:a.iconName||"Link",onChange:r=>f({...m,[t]:{...a,iconName:r}})})]})]},t)})}),N==="guide"&&e.jsxs("div",{className:"space-y-2 h-full flex flex-col",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500",children:"日历同步教程 (HTML 支持)"}),e.jsx("textarea",{value:m.calendarGuideHtml||"",onChange:t=>f({...m,calendarGuideHtml:t.target.value}),className:"w-full flex-1 p-3 glass-input rounded-lg text-xs font-mono resize-none focus:outline-none",placeholder:"<div>输入自定义 HTML 内容...</div>"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-4 shrink-0",children:[e.jsx("button",{onClick:()=>n(null),className:"flex-1 py-3 bg-gray-100 dark:bg-white/10 rounded-xl font-bold text-slate-600 dark:text-white/80",children:"取消"}),e.jsx("button",{onClick:St,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg",children:"保存配置"})]})]})})}),(c==="export_cimbar"||c==="export_file")&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsxs("div",{className:"glass-panel rounded-3xl p-6 w-full max-w-sm text-center bg-white/95 dark:bg-black/60 relative",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:c==="export_cimbar"?"生成彩色配置码":"导出备份文件"}),ft?e.jsxs("div",{className:"py-12 flex flex-col items-center gap-4",children:[e.jsx(be,{className:"animate-spin text-indigo-500",size:32}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-white/60",children:"正在加密打包数据..."})]}):J?e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"bg-white p-2 rounded-xl border border-gray-200 mb-6",children:e.jsx("img",{src:J,className:"w-full h-auto object-contain",style:{imageRendering:"pixelated"}})}),e.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"请使用另一台设备在“安全中心”扫描恢复"}),e.jsxs("button",{onClick:Ot,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg flex items-center justify-center gap-2",children:[e.jsx(ge,{size:18})," 保存图片"]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-500/10 rounded-xl text-left border border-indigo-100 dark:border-indigo-500/20",children:[e.jsxs("h4",{className:"font-bold text-indigo-700 dark:text-indigo-300 text-sm mb-1 flex items-center gap-2",children:[e.jsx(et,{size:14})," 安全加密 (可选)"]}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:y,onChange:t=>H(t.target.checked)}),e.jsx("div",{className:"w-9 h-5 bg-gray-200 dark:bg-white/20 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-indigo-600"})]}),e.jsx("span",{className:"text-xs text-slate-500 dark:text-white/60",children:y?"已启用":"未启用"})]}),y&&e.jsx("input",{type:"password",placeholder:"设置密码",value:F,onChange:t=>B(t.target.value),className:"w-full mt-3 p-2 glass-input rounded-lg text-sm"})]}),c==="export_file"&&e.jsxs("div",{className:"flex p-1 bg-black/5 dark:bg-white/5 rounded-xl",children:[e.jsx("button",{onClick:()=>z("full"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${C==="full"?"bg-white dark:bg-white/20 shadow-sm text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-white/50"}`,children:"全部数据"}),e.jsx("button",{onClick:()=>z("profile_only"),className:`flex-1 py-2 rounded-lg text-xs font-bold transition-all ${C==="profile_only"?"bg-white dark:bg-white/20 shadow-sm text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-white/50"}`,children:"仅个人"})]}),e.jsx("button",{onClick:c==="export_cimbar"?Lt:Mt,disabled:y&&!F,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:c==="export_cimbar"?"生成彩色码":"导出文件"})]})]})})}),(c==="import_cimbar"||c==="import_file_decrypt")&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsxs("div",{className:"glass-panel rounded-3xl p-6 w-full max-w-sm text-center bg-white/95 dark:bg-black/60",onClick:t=>t.stopPropagation(),children:[D==="upload"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-6",children:"扫描配置码"}),e.jsxs("label",{className:"w-full h-48 border-2 border-dashed border-slate-300 dark:border-white/20 rounded-2xl flex flex-col items-center justify-center cursor-pointer hover:bg-black/5 dark:hover:bg-white/5 transition-colors mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-indigo-50 dark:bg-white/10 flex items-center justify-center mb-2 text-indigo-500 dark:text-white",children:e.jsx(ue,{size:32})}),e.jsx("span",{className:"text-sm font-bold text-slate-600 dark:text-white/80",children:"点击上传图片"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Gt})]}),Y&&e.jsx("p",{className:"text-red-500 text-xs mb-4",children:Y})]}),(D==="decrypt"||c==="import_file_decrypt")&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"w-16 h-16 bg-amber-100 dark:bg-amber-500/20 rounded-full flex items-center justify-center text-amber-500 dark:text-amber-400 mx-auto mb-4",children:e.jsx(et,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"输入密码"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-white/60 mb-6",children:"该备份已加密，请输入密码解锁"}),e.jsx("input",{type:"password",value:me,onChange:t=>Me(t.target.value),className:"w-full p-3 glass-input rounded-xl text-center text-lg mb-4",placeholder:"******",autoFocus:!0}),Y&&e.jsx("p",{className:"text-red-500 text-xs mb-4",children:Y}),e.jsx("button",{onClick:c==="import_file_decrypt"?Ut:$t,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg",children:"解密"})]}),D==="confirm"&&x&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-500/20 rounded-full flex items-center justify-center text-green-500 dark:text-green-400 mx-auto mb-4",children:e.jsx(ls,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"数据就绪"}),e.jsxs("div",{className:"bg-gray-50 dark:bg-white/5 rounded-xl p-4 mb-6 text-left border border-gray-100 dark:border-white/10",children:[e.jsx("p",{className:"text-xs text-slate-500 dark:text-white/60 mb-1",children:"包含内容:"}),x.profile?e.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm",children:["个人档案: ",x.profile.name]}):(Be=x.active)!=null&&Be.profile?e.jsxs("div",{className:"font-bold text-slate-800 dark:text-white text-sm",children:["个人档案: ",x.active.profile.name," (及其他账号)"]}):e.jsx("div",{className:"font-bold text-slate-800 dark:text-white text-sm",children:"仅配置数据 (无个人档案)"}),e.jsx("div",{className:"text-xs text-slate-400 mt-2",children:"恢复将覆盖当前同名数据"})]}),e.jsx("button",{onClick:Ft,className:"w-full py-3 bg-green-600 text-white rounded-xl font-bold shadow-lg",children:"确认恢复"})]}),D==="auth_check"&&e.jsx("div",{className:"animate-fade-in",children:pt==="verifying"?e.jsxs("div",{className:"py-12",children:[e.jsx(be,{className:"animate-spin text-indigo-500 mx-auto mb-4",size:32}),e.jsx("p",{className:"text-sm font-bold text-slate-600 dark:text-white/80",children:"正在验证凭证签名..."})]}):e.jsxs("div",{className:"py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-500/20 rounded-full flex items-center justify-center text-green-500 dark:text-green-400 mx-auto mb-4",children:e.jsx(W,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"权限验证通过"}),e.jsxs("p",{className:"text-sm text-slate-500 dark:text-white/60 mb-6",children:["即将激活: ",e.jsx("span",{className:"font-bold text-indigo-500",children:Z(x==null?void 0:x.role)})]}),e.jsx("button",{onClick:$e,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold shadow-lg",children:"激活权限"})]})}),D==="legacy_reveal"&&x&&e.jsxs("div",{className:"animate-fade-in text-left",children:[e.jsx("h3",{className:"text-2xl font-serif font-bold text-slate-900 dark:text-white mb-6 text-center",children:"传承寄语"}),e.jsxs("div",{className:"relative p-6 bg-amber-50 dark:bg-amber-900/10 rounded-2xl border border-amber-100 dark:border-amber-500/20 mb-8",children:[e.jsx("div",{className:"absolute top-0 left-0 text-6xl text-amber-200 dark:text-amber-500/20 font-serif -mt-4 -ml-2",children:"“"}),e.jsx("p",{className:"relative z-10 text-amber-900 dark:text-amber-100/90 text-lg font-serif italic leading-relaxed text-center",children:x.msg}),e.jsx("div",{className:"absolute bottom-0 right-0 text-6xl text-amber-200 dark:text-amber-500/20 font-serif -mb-8 -mr-2",children:"”"})]}),e.jsx("button",{onClick:$e,className:"w-full py-3 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-xl font-bold shadow-lg shadow-amber-500/30",children:"接受传承"})]})]})})}),(c==="help_admin"||c==="help_security")&&e.jsx(v,{children:e.jsx("div",{className:"fixed inset-0 z-[999] bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",onClick:()=>n(null),children:e.jsxs("div",{className:"glass-panel rounded-3xl p-6 w-full max-w-sm bg-white/95 dark:bg-black/60",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"帮助说明"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-white/60 mb-6 leading-relaxed",children:c==="help_admin"?"管理员控制台允许您修改全局配置（如首页卡片链接）、分配权限给其他成员。长期管理员可生成包含寄语的传承码，将权限移交给继任者。":"安全中心用于数据的备份与恢复。支持生成加密的 JSON 文件或 CIMBAR 彩色码。CIMBAR 是一种高密度二维码，可直接通过扫描图片在不同设备间传输大量数据。"}),e.jsx("button",{onClick:()=>n(null),className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-bold",children:"了解"})]})})})]})};export{Ys as default};
